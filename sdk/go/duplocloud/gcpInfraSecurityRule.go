// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package duplocloud

import (
	"context"
	"reflect"

	"errors"
	"github.com/duplocloud/pulumi-duplocloud/sdk/go/duplocloud/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// `GcpInfraSecurityRule` applies gcp security rule to  infra
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/duplocloud/pulumi-duplocloud/sdk/go/duplocloud"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := duplocloud.NewGcpInfraSecurityRule(ctx, "irule", &duplocloud.GcpInfraSecurityRuleArgs{
//				InfraName:   pulumi.String("test"),
//				Name:        pulumi.String("test-infra-r14"),
//				Description: pulumi.String("test rule for infra test"),
//				PortsAndProtocols: duplocloud.GcpInfraSecurityRulePortsAndProtocolArray{
//					&duplocloud.GcpInfraSecurityRulePortsAndProtocolArgs{
//						Ports: pulumi.StringArray{
//							pulumi.String("24"),
//							pulumi.String("23-89"),
//						},
//						ServiceProtocol: pulumi.String("tcp"),
//					},
//					&duplocloud.GcpInfraSecurityRulePortsAndProtocolArgs{
//						Ports: pulumi.StringArray{
//							pulumi.String("100"),
//						},
//						ServiceProtocol: pulumi.String("udp"),
//					},
//				},
//				SourceRanges: pulumi.StringArray{
//					pulumi.String("0.0.0.0/32"),
//				},
//				RuleType: pulumi.String("ALLOW"),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// Example: Importing an existing S3 bucket
//
//   - *INFRA_NAME* is the name of infrastructure
//
//   - *RULE_NAME* is the  name of the security rule
//
// #
//
// ```sh
// $ pulumi import duplocloud:index/gcpInfraSecurityRule:GcpInfraSecurityRule irule *INFRA_NAME/security-rule/*RULE_NAME*
// ```
type GcpInfraSecurityRule struct {
	pulumi.CustomResourceState

	// The description related to the rule
	Description pulumi.StringOutput `pulumi:"description"`
	Direction   pulumi.StringOutput `pulumi:"direction"`
	// Duplocloud prefixed rule name
	Fullname pulumi.StringOutput `pulumi:"fullname"`
	// The name of the infrastructure where rule gets applied
	InfraName pulumi.StringOutput `pulumi:"infraName"`
	Kind      pulumi.StringOutput `pulumi:"kind"`
	// Specify rule name
	Name              pulumi.StringOutput                             `pulumi:"name"`
	Network           pulumi.StringOutput                             `pulumi:"network"`
	PortsAndProtocols GcpInfraSecurityRulePortsAndProtocolArrayOutput `pulumi:"portsAndProtocols"`
	Priority          pulumi.IntOutput                                `pulumi:"priority"`
	// Specify type of access rule (ALLOW , DENY)
	RuleType pulumi.StringOutput `pulumi:"ruleType"`
	SelfLink pulumi.StringOutput `pulumi:"selfLink"`
	// The lists of IPv4 or IPv6 addresses in CIDR format that specify the source of traffic for a firewall rule
	SourceRanges pulumi.StringArrayOutput `pulumi:"sourceRanges"`
	SourceTags   pulumi.StringArrayOutput `pulumi:"sourceTags"`
}

// NewGcpInfraSecurityRule registers a new resource with the given unique name, arguments, and options.
func NewGcpInfraSecurityRule(ctx *pulumi.Context,
	name string, args *GcpInfraSecurityRuleArgs, opts ...pulumi.ResourceOption) (*GcpInfraSecurityRule, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.InfraName == nil {
		return nil, errors.New("invalid value for required argument 'InfraName'")
	}
	if args.PortsAndProtocols == nil {
		return nil, errors.New("invalid value for required argument 'PortsAndProtocols'")
	}
	if args.RuleType == nil {
		return nil, errors.New("invalid value for required argument 'RuleType'")
	}
	if args.SourceRanges == nil {
		return nil, errors.New("invalid value for required argument 'SourceRanges'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource GcpInfraSecurityRule
	err := ctx.RegisterResource("duplocloud:index/gcpInfraSecurityRule:GcpInfraSecurityRule", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetGcpInfraSecurityRule gets an existing GcpInfraSecurityRule resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetGcpInfraSecurityRule(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *GcpInfraSecurityRuleState, opts ...pulumi.ResourceOption) (*GcpInfraSecurityRule, error) {
	var resource GcpInfraSecurityRule
	err := ctx.ReadResource("duplocloud:index/gcpInfraSecurityRule:GcpInfraSecurityRule", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering GcpInfraSecurityRule resources.
type gcpInfraSecurityRuleState struct {
	// The description related to the rule
	Description *string `pulumi:"description"`
	Direction   *string `pulumi:"direction"`
	// Duplocloud prefixed rule name
	Fullname *string `pulumi:"fullname"`
	// The name of the infrastructure where rule gets applied
	InfraName *string `pulumi:"infraName"`
	Kind      *string `pulumi:"kind"`
	// Specify rule name
	Name              *string                                `pulumi:"name"`
	Network           *string                                `pulumi:"network"`
	PortsAndProtocols []GcpInfraSecurityRulePortsAndProtocol `pulumi:"portsAndProtocols"`
	Priority          *int                                   `pulumi:"priority"`
	// Specify type of access rule (ALLOW , DENY)
	RuleType *string `pulumi:"ruleType"`
	SelfLink *string `pulumi:"selfLink"`
	// The lists of IPv4 or IPv6 addresses in CIDR format that specify the source of traffic for a firewall rule
	SourceRanges []string `pulumi:"sourceRanges"`
	SourceTags   []string `pulumi:"sourceTags"`
}

type GcpInfraSecurityRuleState struct {
	// The description related to the rule
	Description pulumi.StringPtrInput
	Direction   pulumi.StringPtrInput
	// Duplocloud prefixed rule name
	Fullname pulumi.StringPtrInput
	// The name of the infrastructure where rule gets applied
	InfraName pulumi.StringPtrInput
	Kind      pulumi.StringPtrInput
	// Specify rule name
	Name              pulumi.StringPtrInput
	Network           pulumi.StringPtrInput
	PortsAndProtocols GcpInfraSecurityRulePortsAndProtocolArrayInput
	Priority          pulumi.IntPtrInput
	// Specify type of access rule (ALLOW , DENY)
	RuleType pulumi.StringPtrInput
	SelfLink pulumi.StringPtrInput
	// The lists of IPv4 or IPv6 addresses in CIDR format that specify the source of traffic for a firewall rule
	SourceRanges pulumi.StringArrayInput
	SourceTags   pulumi.StringArrayInput
}

func (GcpInfraSecurityRuleState) ElementType() reflect.Type {
	return reflect.TypeOf((*gcpInfraSecurityRuleState)(nil)).Elem()
}

type gcpInfraSecurityRuleArgs struct {
	// The description related to the rule
	Description *string `pulumi:"description"`
	// The name of the infrastructure where rule gets applied
	InfraName string `pulumi:"infraName"`
	// Specify rule name
	Name              *string                                `pulumi:"name"`
	PortsAndProtocols []GcpInfraSecurityRulePortsAndProtocol `pulumi:"portsAndProtocols"`
	// Specify type of access rule (ALLOW , DENY)
	RuleType string `pulumi:"ruleType"`
	// The lists of IPv4 or IPv6 addresses in CIDR format that specify the source of traffic for a firewall rule
	SourceRanges []string `pulumi:"sourceRanges"`
}

// The set of arguments for constructing a GcpInfraSecurityRule resource.
type GcpInfraSecurityRuleArgs struct {
	// The description related to the rule
	Description pulumi.StringPtrInput
	// The name of the infrastructure where rule gets applied
	InfraName pulumi.StringInput
	// Specify rule name
	Name              pulumi.StringPtrInput
	PortsAndProtocols GcpInfraSecurityRulePortsAndProtocolArrayInput
	// Specify type of access rule (ALLOW , DENY)
	RuleType pulumi.StringInput
	// The lists of IPv4 or IPv6 addresses in CIDR format that specify the source of traffic for a firewall rule
	SourceRanges pulumi.StringArrayInput
}

func (GcpInfraSecurityRuleArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*gcpInfraSecurityRuleArgs)(nil)).Elem()
}

type GcpInfraSecurityRuleInput interface {
	pulumi.Input

	ToGcpInfraSecurityRuleOutput() GcpInfraSecurityRuleOutput
	ToGcpInfraSecurityRuleOutputWithContext(ctx context.Context) GcpInfraSecurityRuleOutput
}

func (*GcpInfraSecurityRule) ElementType() reflect.Type {
	return reflect.TypeOf((**GcpInfraSecurityRule)(nil)).Elem()
}

func (i *GcpInfraSecurityRule) ToGcpInfraSecurityRuleOutput() GcpInfraSecurityRuleOutput {
	return i.ToGcpInfraSecurityRuleOutputWithContext(context.Background())
}

func (i *GcpInfraSecurityRule) ToGcpInfraSecurityRuleOutputWithContext(ctx context.Context) GcpInfraSecurityRuleOutput {
	return pulumi.ToOutputWithContext(ctx, i).(GcpInfraSecurityRuleOutput)
}

// GcpInfraSecurityRuleArrayInput is an input type that accepts GcpInfraSecurityRuleArray and GcpInfraSecurityRuleArrayOutput values.
// You can construct a concrete instance of `GcpInfraSecurityRuleArrayInput` via:
//
//	GcpInfraSecurityRuleArray{ GcpInfraSecurityRuleArgs{...} }
type GcpInfraSecurityRuleArrayInput interface {
	pulumi.Input

	ToGcpInfraSecurityRuleArrayOutput() GcpInfraSecurityRuleArrayOutput
	ToGcpInfraSecurityRuleArrayOutputWithContext(context.Context) GcpInfraSecurityRuleArrayOutput
}

type GcpInfraSecurityRuleArray []GcpInfraSecurityRuleInput

func (GcpInfraSecurityRuleArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*GcpInfraSecurityRule)(nil)).Elem()
}

func (i GcpInfraSecurityRuleArray) ToGcpInfraSecurityRuleArrayOutput() GcpInfraSecurityRuleArrayOutput {
	return i.ToGcpInfraSecurityRuleArrayOutputWithContext(context.Background())
}

func (i GcpInfraSecurityRuleArray) ToGcpInfraSecurityRuleArrayOutputWithContext(ctx context.Context) GcpInfraSecurityRuleArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(GcpInfraSecurityRuleArrayOutput)
}

// GcpInfraSecurityRuleMapInput is an input type that accepts GcpInfraSecurityRuleMap and GcpInfraSecurityRuleMapOutput values.
// You can construct a concrete instance of `GcpInfraSecurityRuleMapInput` via:
//
//	GcpInfraSecurityRuleMap{ "key": GcpInfraSecurityRuleArgs{...} }
type GcpInfraSecurityRuleMapInput interface {
	pulumi.Input

	ToGcpInfraSecurityRuleMapOutput() GcpInfraSecurityRuleMapOutput
	ToGcpInfraSecurityRuleMapOutputWithContext(context.Context) GcpInfraSecurityRuleMapOutput
}

type GcpInfraSecurityRuleMap map[string]GcpInfraSecurityRuleInput

func (GcpInfraSecurityRuleMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*GcpInfraSecurityRule)(nil)).Elem()
}

func (i GcpInfraSecurityRuleMap) ToGcpInfraSecurityRuleMapOutput() GcpInfraSecurityRuleMapOutput {
	return i.ToGcpInfraSecurityRuleMapOutputWithContext(context.Background())
}

func (i GcpInfraSecurityRuleMap) ToGcpInfraSecurityRuleMapOutputWithContext(ctx context.Context) GcpInfraSecurityRuleMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(GcpInfraSecurityRuleMapOutput)
}

type GcpInfraSecurityRuleOutput struct{ *pulumi.OutputState }

func (GcpInfraSecurityRuleOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**GcpInfraSecurityRule)(nil)).Elem()
}

func (o GcpInfraSecurityRuleOutput) ToGcpInfraSecurityRuleOutput() GcpInfraSecurityRuleOutput {
	return o
}

func (o GcpInfraSecurityRuleOutput) ToGcpInfraSecurityRuleOutputWithContext(ctx context.Context) GcpInfraSecurityRuleOutput {
	return o
}

// The description related to the rule
func (o GcpInfraSecurityRuleOutput) Description() pulumi.StringOutput {
	return o.ApplyT(func(v *GcpInfraSecurityRule) pulumi.StringOutput { return v.Description }).(pulumi.StringOutput)
}

func (o GcpInfraSecurityRuleOutput) Direction() pulumi.StringOutput {
	return o.ApplyT(func(v *GcpInfraSecurityRule) pulumi.StringOutput { return v.Direction }).(pulumi.StringOutput)
}

// Duplocloud prefixed rule name
func (o GcpInfraSecurityRuleOutput) Fullname() pulumi.StringOutput {
	return o.ApplyT(func(v *GcpInfraSecurityRule) pulumi.StringOutput { return v.Fullname }).(pulumi.StringOutput)
}

// The name of the infrastructure where rule gets applied
func (o GcpInfraSecurityRuleOutput) InfraName() pulumi.StringOutput {
	return o.ApplyT(func(v *GcpInfraSecurityRule) pulumi.StringOutput { return v.InfraName }).(pulumi.StringOutput)
}

func (o GcpInfraSecurityRuleOutput) Kind() pulumi.StringOutput {
	return o.ApplyT(func(v *GcpInfraSecurityRule) pulumi.StringOutput { return v.Kind }).(pulumi.StringOutput)
}

// Specify rule name
func (o GcpInfraSecurityRuleOutput) Name() pulumi.StringOutput {
	return o.ApplyT(func(v *GcpInfraSecurityRule) pulumi.StringOutput { return v.Name }).(pulumi.StringOutput)
}

func (o GcpInfraSecurityRuleOutput) Network() pulumi.StringOutput {
	return o.ApplyT(func(v *GcpInfraSecurityRule) pulumi.StringOutput { return v.Network }).(pulumi.StringOutput)
}

func (o GcpInfraSecurityRuleOutput) PortsAndProtocols() GcpInfraSecurityRulePortsAndProtocolArrayOutput {
	return o.ApplyT(func(v *GcpInfraSecurityRule) GcpInfraSecurityRulePortsAndProtocolArrayOutput {
		return v.PortsAndProtocols
	}).(GcpInfraSecurityRulePortsAndProtocolArrayOutput)
}

func (o GcpInfraSecurityRuleOutput) Priority() pulumi.IntOutput {
	return o.ApplyT(func(v *GcpInfraSecurityRule) pulumi.IntOutput { return v.Priority }).(pulumi.IntOutput)
}

// Specify type of access rule (ALLOW , DENY)
func (o GcpInfraSecurityRuleOutput) RuleType() pulumi.StringOutput {
	return o.ApplyT(func(v *GcpInfraSecurityRule) pulumi.StringOutput { return v.RuleType }).(pulumi.StringOutput)
}

func (o GcpInfraSecurityRuleOutput) SelfLink() pulumi.StringOutput {
	return o.ApplyT(func(v *GcpInfraSecurityRule) pulumi.StringOutput { return v.SelfLink }).(pulumi.StringOutput)
}

// The lists of IPv4 or IPv6 addresses in CIDR format that specify the source of traffic for a firewall rule
func (o GcpInfraSecurityRuleOutput) SourceRanges() pulumi.StringArrayOutput {
	return o.ApplyT(func(v *GcpInfraSecurityRule) pulumi.StringArrayOutput { return v.SourceRanges }).(pulumi.StringArrayOutput)
}

func (o GcpInfraSecurityRuleOutput) SourceTags() pulumi.StringArrayOutput {
	return o.ApplyT(func(v *GcpInfraSecurityRule) pulumi.StringArrayOutput { return v.SourceTags }).(pulumi.StringArrayOutput)
}

type GcpInfraSecurityRuleArrayOutput struct{ *pulumi.OutputState }

func (GcpInfraSecurityRuleArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*GcpInfraSecurityRule)(nil)).Elem()
}

func (o GcpInfraSecurityRuleArrayOutput) ToGcpInfraSecurityRuleArrayOutput() GcpInfraSecurityRuleArrayOutput {
	return o
}

func (o GcpInfraSecurityRuleArrayOutput) ToGcpInfraSecurityRuleArrayOutputWithContext(ctx context.Context) GcpInfraSecurityRuleArrayOutput {
	return o
}

func (o GcpInfraSecurityRuleArrayOutput) Index(i pulumi.IntInput) GcpInfraSecurityRuleOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *GcpInfraSecurityRule {
		return vs[0].([]*GcpInfraSecurityRule)[vs[1].(int)]
	}).(GcpInfraSecurityRuleOutput)
}

type GcpInfraSecurityRuleMapOutput struct{ *pulumi.OutputState }

func (GcpInfraSecurityRuleMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*GcpInfraSecurityRule)(nil)).Elem()
}

func (o GcpInfraSecurityRuleMapOutput) ToGcpInfraSecurityRuleMapOutput() GcpInfraSecurityRuleMapOutput {
	return o
}

func (o GcpInfraSecurityRuleMapOutput) ToGcpInfraSecurityRuleMapOutputWithContext(ctx context.Context) GcpInfraSecurityRuleMapOutput {
	return o
}

func (o GcpInfraSecurityRuleMapOutput) MapIndex(k pulumi.StringInput) GcpInfraSecurityRuleOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *GcpInfraSecurityRule {
		return vs[0].(map[string]*GcpInfraSecurityRule)[vs[1].(string)]
	}).(GcpInfraSecurityRuleOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*GcpInfraSecurityRuleInput)(nil)).Elem(), &GcpInfraSecurityRule{})
	pulumi.RegisterInputType(reflect.TypeOf((*GcpInfraSecurityRuleArrayInput)(nil)).Elem(), GcpInfraSecurityRuleArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*GcpInfraSecurityRuleMapInput)(nil)).Elem(), GcpInfraSecurityRuleMap{})
	pulumi.RegisterOutputType(GcpInfraSecurityRuleOutput{})
	pulumi.RegisterOutputType(GcpInfraSecurityRuleArrayOutput{})
	pulumi.RegisterOutputType(GcpInfraSecurityRuleMapOutput{})
}
